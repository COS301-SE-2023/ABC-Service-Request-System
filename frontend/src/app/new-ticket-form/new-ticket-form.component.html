<!-- eslint-disable @angular-eslint/template/label-has-associated-control -->
<div class="page-container {{this.navbarIsCollapsed === true ? 'widen' : ''}}">
  <h1>Create Ticket</h1>

  <div class="form-container">
    <form [formGroup]="ticketForm" (ngSubmit)="onSubmit()">
      <div class="form-header">
        <h1 class="assignee">Assignee: {{ assigneeName }}</h1>
        <!-- <img src="{{ getUsersProfilePicture() }}" alt="profile-picture"> -->
      </div>

      <div class="project-details">
        <label>Project<span class="required">*</span></label>
        <select formControlName="project" required>
          <option value="Nedbank">Nedbank Mobile App</option>
          <option value="SB">Standard Bank Website</option>
          <option value="FNB">FNB Cash Withdrawal</option>
        </select>
      </div>

      <div class="ticket-details">
        <label>Summary<span class="required">*</span></label>
        <input type="text" formControlName="summary" required>

        <label class="descriptionLabel">Description<span class="required">*</span></label>
        <quill-editor formControlName="description" [trimOnValidation]="true"></quill-editor>
      </div>

      <div class="ticket-information">
        <div class="ticket-information-col1">
          <label>Start Date<span class="required">*</span></label>
          <input type="date" formControlName="startDate" required>

          <label class="priorityLabel">Priority<span class="required">*</span></label>
          <select formControlName="priority" required>
            <option value="High">High</option>
            <option value="Medium">Medium</option>
            <option value="Low">Low</option>
          </select>
        </div>

        <div class="ticket-information-col2">
          <label>End Date<span class="required">*</span></label>
          <input type="date" formControlName="endDate" required>

          <label class="statusLabel">Status<span class="required">*</span></label>
          <select formControlName="status" required>
            <option value="Active">Active</option>
            <option value="Pending">Pending</option>
          </select>
        </div>
      </div>

      <div class="todos">
        <div class="todos-col1">
          <label>Todo's</label>
          <div class="bullet-textbox" contenteditable="true" (keydown)="handleKeyDown($event)"></div>
        </div>

        <div class="todos=col2">
          <label>AI Generated Todo's</label>

          <!-- AI GENERATION HERE -->
          <p>Work in Progress</p>

          <label class="blueLabel" style="color:#04538E; font-size:0.9em;">Choose what to keep by selecting the checkboxes</label>
        </div>
      </div>

      <div class="assignedInformation">
        <div class="assignedInformation-col1">
          <label>Assigned<span class="required">*</span></label>
          <select formControlName="assigned" required (change)="onAssignedChange()">
            <option *ngFor="let user of allUsers" [ngValue]="user">{{ user.name }}</option>
          </select>

          <label class="groupLabel">Group<span class="required">*</span></label>
          <select formControlName="group" required>
            <option value="Lemur">Lemur Squad</option>
            <option value="Hyperion">Hyperion Tech</option>
            <option value="Delta">Delta Backend</option>
          </select>
        </div>

        <div class="assignedInformation-col2">
          <div class="memberAIBlock">
            <label>Suggested Technical Members</label>

            <div class="memberAIContent">

            </div>
          </div>
        </div>
      </div>
      <!-- <span class="error-message" *ngIf="ticketForm.get('description').invalid && ticketForm.get('description').touched">
        Description is required.
      </span> -->

    <div class="submitButton">
      <button id="submit-button" type="submit">Submit</button>
    </div>
  </form>

  
</div>
</div>


<app-dash-panel></app-dash-panel>
<app-page-header></app-page-header>
